<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Santaolalla</title>
</head>
<script>
    document.write('<p>App Santaolalla<p>')
    const fruits = [
        { name: "Manzana", price: 100, stock: 20 },
        { name: "Pera", price: 150, stock: 10 },
        { name: "Naranja", price: 300, stock: 10 },
        { name: "Plátano", price: 200, stock: 5 },
        { name: "Mango", price: 500, stock: 1 },
        { name: "Mandarina", price: 150, stock: 2 },
        
    ];

    //Lista las frutas disponibles con stock mayor o igual a 2
    document.write('<p>Frutas disponibles:</p>')  
    const fruitsWithStock = fruits.filter(fruit => fruit.stock >= 2)
    .map(fruit => `<li>${fruit.name} - Stock:${fruit.stock}  - Precio:$${fruit.price}`)
    document.write('<ul>' + fruitsWithStock.join('\n') + '</ul>')
        
    //Lista las frutas disponibles con stock menor a 2 y su valor incrementado en un 30%   
    document.write('<p>Frutas con stock mínimo:</p>')
    const minStockIncrease = fruits.map((fruit) => {
        if (fruit.name && fruit.stock === 2) return fruit
        return{
            ...fruit,
             price: fruit.price * 1.3,
        }
    })

    const minStock = minStockIncrease.filter(fruit => fruit.stock < 2).map(fruit => `<li>${fruit.name} - Stock:${fruit.stock}  - Precio:$${fruit.price}`)
    document.write('<ul>' + minStock.join('\n') + '</ul>')

    //Indica el total de los productos en existencia por fruta y total de todos los productos
    document.write('<p>Valor de Stock disponible:</p>')

    console.log(minStockIncrease)
    const totalPerFruit = minStockIncrease.forEach(fruit => {
        const total = fruit.price * fruit.stock
        return total
    })

    // función que multiplica el precio por el stock
    const subTotal = minStockIncrease.reduce((subTotal, fruit) => {
        const multStockForPrice = fruit.stock * fruit.price
        subTotal[fruit.name] = multStockForPrice
        return subTotal           
    })
           
    console.log(subTotal)

</script>
<body>
    
</body>
</html>